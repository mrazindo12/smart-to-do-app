/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/chrono-node@2.5.0/dist/chrono.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ParsingContext=exports.Chrono=void 0;const results_1=require("./results"),en_1=require("./locales/en");class Chrono{constructor(e){e=e||en_1.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new Chrono({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,s){const n=this.parse(e,t,s);return n.length>0?n[0].start.date():null}parse(e,t,s){const n=new ParsingContext(e,t,s);let r=[];return this.parsers.forEach((e=>{const t=Chrono.executeParser(n,e);r=r.concat(t)})),r.sort(((e,t)=>e.index-t.index)),this.refiners.forEach((function(e){r=e.refine(n,r)})),r}static executeParser(e,t){const s=[],n=t.pattern(e),r=e.text;let o=e.text,i=n.exec(o);for(;i;){const a=i.index+r.length-o.length;i.index=a;const c=t.extract(e,i);if(!c){o=r.substring(i.index+1),i=n.exec(o);continue}let u=null;c instanceof results_1.ParsingResult?u=c:c instanceof results_1.ParsingComponents?(u=e.createParsingResult(i.index,i[0]),u.start=c):u=e.createParsingResult(i.index,i[0],c),e.debug((()=>console.log(`${t.constructor.name} extracted result ${u}`))),s.push(u),o=r.substring(a+u.text.length),i=n.exec(o)}return s}}exports.Chrono=Chrono;class ParsingContext{constructor(e,t,s){this.text=e,this.reference=new results_1.ReferenceWithTimezone(t),this.option=null!=s?s:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof results_1.ParsingComponents?e:new results_1.ParsingComponents(this.reference,e)}createParsingResult(e,t,s,n){const r="string"==typeof t?t:this.text.substring(e,t),o=s?this.createParsingComponents(s):null,i=n?this.createParsingComponents(n):null;return new results_1.ParsingResult(this.reference,e,r,o,i)}debug(e){if(this.option.debug)if(this.option.debug instanceof Function)this.option.debug(e);else{this.option.debug.debug(e)}}}exports.ParsingContext=ParsingContext;
//# sourceMappingURL=/sm/22c94fcb17fbf7561f15f6364fd8ef123b813128faaa88195a8f4e14f755c012.map